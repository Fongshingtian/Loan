!function(e){var t=function(){this.init()};t.prototype={init:function(){this.ui={},this.ui.appointmentForm=e("#appointmentForm"),this.ui.productCodeSel=e('#appointmentForm select[name="productCode"]').eq(0),this.ui.txtMeetTime=e('#appointmentForm input[name="meetTime"]').eq(0),this.ui.successWrap=e(".appoint-success-wrap"),this.initData(),this.regEvent(),this.appointmentFormInit()},initData:function(){new window.PhoneVerifyCode({elBtn:e("#btn-send-code"),elPhone:e('#appointmentForm input[name="mobile"]').eq(0)})},regEvent:function(){var e=this;this.ui.productCodeSel.on("changed.bs.select",function(){e.appointmentFormValidator.element(this)}),this.ui.txtMeetTime.on("change",function(){e.appointmentFormValidator.element(this)})},appointmentFormInit:function(){var t=this,a=this.ui.appointmentForm;this.appointmentFormValidator=a.validate({rules:{custName:"required",idNum:{required:!0,isIDCard:!0},mobile:{required:!0,isPhone:!0},meetTime:{required:!0,isDate:!0},captcha:"required",productCode:"required"},messages:{custName:"请输入您的姓名",idNum:{required:"请输入身份证号",isIDCard:"身份证号码格式不正确"},mobile:{required:"请输入手机号码",isPhone:"请您输入正确手机号"},meetTime:{required:"请输入预约时间",isDate:"预约时间格式不正确"},captcha:"请输入手机验证码",productCode:"请选择贷款产品"},errorClass:"has-error",errorPlacement:function(t,a){e(a).hasClass("selectpicker")?e(a).parent().parent().parent().find(".xn-error").html(t):"isAgree"==e(a).attr("name")||"meetTime"==e(a).attr("name")?e(a).parent().parent().parent().find(".xn-error").html(t):"captcha"==e(a).attr("name")?e(a).parent().parent().find(".xn-error").html(t):e(a).parent().find(".xn-error").html(t)},highlight:function(t,a){e(t).hasClass("selectpicker")?e(t).parent().parent().parent().addClass(a):e(t).hasClass("area-sel")?e(t).parent().parent().addClass(a):"isAgree"==e(t).attr("name")||"meetTime"==e(t).attr("name")?e(t).parent().parent().parent().addClass(a):"captcha"==e(t).attr("name")?e(t).parent().parent().addClass(a):e(t).parent().addClass(a)},success:function(t,a){e(a).hasClass("selectpicker")?e(a).parent().parent().parent().removeClass("has-error").addClass("has-success"):e(a).hasClass("area-sel")?e(a).parent().parent().removeClass("has-error"):"isAgree"==e(a).attr("name")||"meetTime"==e(a).attr("name")?e(a).parent().parent().parent().removeClass("has-error").addClass("has-success"):"captcha"==e(a).attr("name")?e(a).parent().parent().removeClass("has-error").addClass("has-success"):e(a).parent().removeClass("has-error").addClass("has-success")},submitHandler:function(){a.find(".has-error").removeClass("has-error"),e("#btn-loan-appoint").addClass("disabled"),window.API.submitAppointment(a.serialize()).then(function(r){"1"==r.code?(a[0].reset(),a.hide(),t.ui.successWrap.animate({opacity:1,marginTop:0},500).show()):r.code<=0?(alert(r.msg),e("#btn-loan-appoint").removeClass("disabled")):alert("系统异常！")},function(){alert("系统异常！")}).always(function(){e("#btn-loan-appoint").removeClass("disabled")})}})}},e(function(){new t})}($);