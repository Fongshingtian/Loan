!function(e){var a=function(){this.init()};a.prototype={init:function(){this.ui={},this.ui.loanHelperForm=e("#loanHelperForm"),this.ui.custName=e('#loanHelperForm input[name="custName"]').eq(0),this.ui.mobile=e('#loanHelperForm input[name="mobile"]').eq(0),this.ui.professionSel=e('#loanHelperForm select[name="profession"]').eq(0),this.ui.loanMoney=e('#loanHelperForm input[name="loanMoney"]').eq(0),this.ui.hasHouseSel=e('#loanHelperForm select[name="hasHouse"]').eq(0),this.ui.houseConditionSel=e('#loanHelperForm select[name="houseCondition"]').eq(0),this.ui.hasCarRadio=e('#loanHelperForm input[name="hasCar"]'),this.ui.hasHouseArea=e("#hasHouseArea"),this.ui.formInpArea=e(".loan-process-right-content"),this.ui.helperResultArea=e(".loan-recommendResult-right-content"),this.ui.btnShowResult=e("#btn-show-result"),this.initData(),this.regEvent(),this.loanHelperFormInit()},initData:function(){},regEvent:function(){var a=this;this.ui.hasHouseSel.on("change",function(){"0"==e(this).val()?a.ui.hasHouseArea.slideDown():a.ui.hasHouseArea.slideUp()}),this.ui.professionSel.on("changed.bs.select",function(){a.loanHelperFormValidator.element(this)}),this.ui.hasHouseSel.on("changed.bs.select",function(){a.loanHelperFormValidator.element(this)}),this.ui.houseConditionSel.on("changed.bs.select",function(){a.loanHelperFormValidator.element(this)})},loanHelperFormInit:function(){var a=this;e.validator.addMethod("isloanMoney",function(e){loanMinLimit=parseFloat(1e4)||0,loanMaxLimit=parseFloat(2e5)||0;var a=parseFloat(e)||0;return a>=loanMinLimit&&loanMaxLimit>=a?!0:!1},"贷款额度输入有误!");var n=this.ui.loanHelperForm;this.loanHelperFormValidator=n.validate({rules:{custName:"required",mobile:{required:!0,isPhone:!0},profession:"required",loanMoney:{required:!0,isloanMoney:!0},hasHouse:"required",houseCondition:{required:"#sel-has-house:checked"},hasCar:"required",lifePolicy:"required"},messages:{custName:"请输入您的姓名",mobile:{required:"请输入您的手机号",isPhone:"请您输入正确手机号"},profession:"请选择职业",loanMoney:{required:"请输入借款额度",isloanMoney:"借款额度要求不低于10000不高于200000"},hasHouse:"请选择是否持有房产",houseCondition:"请选择名下房产情况",hasCar:"请选择是否有私家车",lifePolicy:"请选择您的保单类型"},errorClass:"has-error",errorPlacement:function(a,n){e(n).hasClass("selectpicker")?e(n).parent().parent().parent().find(".xn-error").html(a):"lifePolicy"==e(n).attr("name")||"hasCar"==e(n).attr("name")?e(n).parent().parent().parent().find(".xn-error").html(a):e(n).parent().find(".xn-error").html(a)},highlight:function(a,n){e(a).hasClass("selectpicker")?e(a).parent().parent().parent().addClass(n):"lifePolicy"==e(a).attr("name")||"hasCar"==e(a).attr("name")?e(a).parent().parent().parent().addClass(n):e(a).parent().addClass(n)},success:function(a,n){e(n).hasClass("selectpicker")?e(n).parent().parent().parent().removeClass("has-error").addClass("has-success"):"lifePolicy"==e(n).attr("name")||"hasCar"==e(n).attr("name")?e(n).parent().parent().parent().removeClass("has-error").addClass("has-success"):e(n).parent().removeClass("has-error").addClass("has-success")},submitHandler:function(){n.find(".has-error").removeClass("has-error"),window.API.loanHelperApply(n.serialize()).then(function(n){if("1"==n.code){var s=n.list||[];if("0"==s.length)e("#loanhelper_txt_none").show(),e("#loanhelper_txtDefault").hide();else{e("#loanhelper_txt_none").hide(),e("#loanhelper_txtDefault").show();for(var t=0;t<s.length;t++)s[t].checkTimeLimit=s[t].checkTimeLimit.replace("个",""),s[t].suitable=s[t].suitable.substring(0,28);var r=e("#loanHelper-list-tpl").html(),i=_.template(r),o=i({loanHelperlist:s}),l=e(".about-detail-list");l.html(o)}a.ui.formInpArea.hide(),a.ui.helperResultArea.slideDown()}else n.code<=0?(alert(n.msg),a.ui.btnShowResult.removeClass("disabled")):alert("系统异常！")},function(){alert("系统异常！")}).always(function(){a.ui.btnShowResult.removeClass("disabled")})}})}},e(function(){new a})}($);