define("bonus/redenvelope/js/init",["../../../module/common/dateUtil","../../../plugIn/poshytip-1.2/src/jquery.poshytip","../../../module/page/js/init","../../../module/common/tab"],function(t,i,e){function a(t){var i=new Date;i.setTime(t);var e=i.getFullYear(),a=i.getMonth()+1,s=i.getDate();i.getHours(),i.getMinutes(),i.getSeconds();return e+"."+a+"."+s}function s(t){if(!t||"number"!=typeof t)return t;for(var t=t+"",i=/(-?\d+)(\d{3})/;i.test(t);)t=t.replace(i,"$1,$2");return t}function o(){$(".red-envelope .subtab-con ul li a.exchange-btn").on("click",function(){if(!l){var t=$(this),i=Number(t.data("type")),e=Number(t.data("id"));l=!0,$.post("/bonus/cashcoupon/exchange",{id:e,type:i},function(t){switch(Number(t.result)){case 1:$(".tip-txt .return-cash-pop-txt1").html("已为您放入账户余额"),$(".tip-txt .return-cash-pop-txt2").html(""),$.Zebra_Dialog($("#returnCashpop").html(),{title:"兑换成功",buttons:!0,width:282,center_buttons:!0,show_close_button:!1,buttons:[{caption:"我知道了",callback:function(){window.location.reload()}}]}),l=!1;break;case 2:$(".tip-txt .return-cash-pop-txt1").html("券有效期内未设置续期或已生效续期不符合条件。"),$(".tip-txt .return-cash-pop-txt2").html("pc暂不支持续期，请在app操作"),$.Zebra_Dialog($("#returnCashpop").html(),{title:"您还没有续期",buttons:!0,width:282,center_buttons:!0,show_close_button:!1,buttons:[{caption:"我知道了"}]}),l=!1;break;case 3:$(".tip-txt .return-cash-pop-txt1").html("您设置的续期处于转让中或未过不可修改期，或生效金额、期限等不符合兑换条件"),$(".tip-txt .return-cash-pop-txt2").html(""),$.Zebra_Dialog($("#returnCashpop").html(),{title:"续期不符合兑换条件",buttons:!0,width:282,center_buttons:!0,show_close_button:!1,buttons:[{caption:"我知道了"}]}),l=!1;break;case 4:$(".tip-txt .return-cash-pop-txt1").html("完成绑卡，再来兑换"),$(".tip-txt .return-cash-pop-txt2").html(""),$.Zebra_Dialog($("#returnCashpop").html(),{title:"暂不符合兑换条件",buttons:!0,width:282,center_buttons:!0,show_close_button:!1,buttons:[{caption:"去绑卡",callback:function(){window.location.href="https://www.xiaoniu88.com/payment/bankcard/index"}},{caption:"取消"}]}),l=!1;break;case 5:$(".tip-txt .return-cash-pop-txt1").html("绑卡返现只能兑换一次"),$(".tip-txt .return-cash-pop-txt2").html(""),$.Zebra_Dialog($("#returnCashpop").html(),{title:"您已兑换过该券",buttons:!0,width:282,center_buttons:!0,show_close_button:!1,buttons:[{caption:"我知道了"}]}),l=!1;break;case 9:$(".tip-txt .return-cash-pop-txt1").html("请稍后重试"),$(".tip-txt .return-cash-pop-txt2").html(""),$.Zebra_Dialog($("#returnCashpop").html(),{title:"兑换失败",buttons:!0,width:282,center_buttons:!0,show_close_button:!1,buttons:[{caption:"我知道了"}]}),l=!1;break;default:l=!1}},"json")}})}function r(t,i){var e=$(".ui_content").find(".confirm").parents("div").siblings("div.msgbox");e.find("p").removeClass().addClass(i).html(t).end().fadeIn()}t("../../../module/common/dateUtil"),t("../../../plugIn/poshytip-1.2/src/jquery.poshytip");var n=t("../../../module/page/js/init");i.dialog=function(t,i,e,a,s,o){$.dialog({id:t,title:i,fixed:!0,width:a,height:s,lock:!0,opacity:.9,background:"#000",max:!1,min:!1,close:o||function(){},content:e})};var p=function(t){var i=location.search.match(new RegExp("[?&]"+t+"=([^&]*)(&?)","i"));return i?i[1]:i},d=p("tab"),h=t("../../../module/common/tab");h.tab("ul.at-tab li","div.at-bd","click","cur",d||0,function(t,i,e){var a=$("a.convert");1==t?a.show():a.hide(),$(".subtab:visible li.cur").trigger("click")});var l=!1;h.tab(".red-envelope ul.subtab li",".red-envelope div.subtab-con","click","cur",0,function(t,i,e){function s(t){var i=t.data;if(i.length){var e,s,o="";"rused"==p&&(e={"000":"可兑现","001":"已兑现","002":"待兑现","003":"已撤销",900:"已过期"},s=["amount","name","origin","productName","state","useTime","encashDate"]);for(var n=0;n<i.length;n++){"rused"!==p&&(s=0==i[n].type?["amount","origin","activeTime&expireTime"]:["amount","origin","issueTime&expireTime"]),o+="<tr>";for(var h=0,l=s.length;h<l;h++){var c=s[h],u=i[n][c]||"";switch(c){case"state":u=e[u]||u;break;case"useTime":case"encashDate":u=u?a(u):"";break;case"activeTime&expireTime":u=a(i[n].activeTime)+"-"+a(i[n].expireTime);break;case"issueTime&expireTime":u=a(i[n].issueTime)+"-"+a(i[n].expireTime)}o+="amount"==c?'<td class="red">￥'+u+"</td>":"<td>"+u+"</td>"}o+="</tr>"}d.html(o)}else r(),$(".pages").remove()}function r(){var t=$("#nodata").data("noimgsrc"),i="rused"==p?7:4,e='<tr ><td colspan="'+i+'" class="no-data"><img src="'+t+'" alt="没有记录">没有记录</td></tr>';d.html(e)}var p=i.data("type"),d=e.find("tbody"),h=$("#pageCal"),l=e.find(".bd-tb-list"),c='<div class="pages"><div class="page"></div></div>',u=(h.data("root"),"rused"==p?"/bonus/used/":"/bonus/overdue/"),f=h.data("imgpath");$(".pages").remove(),l.after(c),"rused"==p?$(".qx-sel span").html("仅显示最近6个月数据"):"rexpired"==p?$(".qx-sel span").html("仅显示最近1个月数据"):$(".qx-sel span").html(""),"runused"==p&&o(),"runused"!=p&&n.pages(u,s,f,d,1,10,"list",100)}),n.pages("/bonus/fiCoupon/used/",function(){},"","",1,10,"list",100),h.tab(".finances ul.subtab li",".finances div.subtab-con","click","cur",0,function(t,i,e){function o(t){var i="";if(null!=t.data&&t.data.length){switch(p){case"fused":for(var e in t.data)i+='<tr><td class="red">￥'+s(t.data[e].couponAmount)+"</td><td>"+t.data[e].source+"</td><td>体验金体验标</td><td>"+a(t.data[e].effectiveDate)+"-"+a(t.data[e].expiryDate)+"</td><td>"+a(t.data[e].usedDate)+"</td></tr>";break;case"fexpired":for(var e in t.data)i+='<tr><td class="red">￥'+s(t.data[e].couponAmount)+"</td><td>"+t.data[e].source+"</td><td>体验金体验标</td><td>"+a(t.data[e].effectiveDate)+"-"+a(t.data[e].expiryDate)+"</td></tr>"}d.html(i)}else r(),$(".pages").remove()}function r(){var t=$("#nodata").data("noimgsrc"),i="fused"==p?5:4,e='<tr ><td colspan="'+i+'" class="no-data"><img src="'+t+'" alt="没有记录">没有记录</td></tr>';d.html(e)}var p=i.data("type"),d=e.find("tbody"),h=$("#pageCal"),l=e.find(".bd-tb-list"),c='<div class="pages"><div class="page"></div></div>',u=(h.data("root"),"fused"==p?"/bonus/fiCoupon/used/":"/bonus/fiCoupon/overdue/"),f=h.data("imgpath");$(".pages").remove(),l.after(c),"funused"!=p&&n.pages(u,o,f,d,1,10,"list",100)}),h.tab(".raise-profits ul.subtab li",".raise-profits div.subtab-con","click","cur",0,function(t,i,e){function a(t){var i=t.data;if(i&&i.length){var e="",a=["<li>",'<div class="wave-line"></div>','<div class="inner">','<div class="quota">',"<span>收益率</span><br/><strong>+{interestRate}%</strong>","</div>",'<div class="note">',"有效时间： {activeTime}到{expireTime}<br />","适用项目： {description}<br /> ","增利时间：{effectPeriods}<br /> ","使用条件： 满<b>{minAmount}</b>元，满<b>{minDeadline}</b>个月<br />","来源：{source}","</div>","</div>","</li>"].join("");$.each(i,function(t,s){e+=a.replace(/\{[^\}]*\}/g,function(e){var e=e.slice(1,-1),a=s[e];switch(e){case"activeTime":case"expireTime":a=$.toDate(a);break;case"effectPeriods":a=0==a?"全程增利":i[t].effectPeriods+(i[t].effectUnit?"个月":"天")}return a})}),o.html(e)}else o.html('<div class="re-nodata"><p>没有记录！</p></div>'),$(".pages").remove()}var s=i.data("type"),o=e.find(".profits-list"),r=$("#pageCal"),p=e.find(".profits-list"),d='<div class="pages"><div class="page"></div></div>',h="iused"==s?"/bonus/interest/used/":"/bonus/interest/expired/",l=r.data("imgpath");$(".pages").remove(),p.after(d),"iunused"!=s&&n.pages(h,a,l,o,1,10,"list",100)}),$("a.convert:eq(0)").on("click",function(){var t=$("#pop").html();i.dialog("dialogz","激活新的体验金券",t,480,280,function(){})}),$(document).delegate("a.confirm","click",function(){var t=$(this);if(!t.is(".disabled")){$("div.msgbox").hide();var i=$("input[name='activeCode']").val();""==i?r("请输入激活码","err"):$.post("/bonus/fiCoupon/activate/",{couponCode:i},function(i){if(1==i.status)r("恭喜您成功激活一张体验金券，3秒后自动关闭弹窗","succ"),setTimeout(function(){$.dialog.list.dialogz.close(),window.location.reload()},3e3);else{var e="";switch(i.errorCode){case"Coupon_Params_Error":e="请求参数错误或者不匹配，请重试";break;case"Coupon_Service_Error":e="服务异常，请重试";break;case"Coupon_InvalidCode_Error":e="激活码错误，您今天还有"+i.data+"次激活机会";break;case"Coupon_Activated_Error":e="体验金券已激活使用，本次激活无效";break;case"Coupon_Invalid_Error":e="请输入12位有效的激活码，您今天还有"+i.data+"次激活机会";break;case"Coupon_EffectOrExpireDate_Error":e="体验金券未到有效期或者已过期",t.addClass("disabled");break;case"Coupon_ActivateCountPerDay_Error":e="操作过于频繁，请明天再次激活",t.addClass("disabled");break;case"Coupon_ActivateCountPerMonth_Error":e="您本月已经激活体验金券超出限制，请下个月再激活",t.addClass("disabled")}r(e,"err")}},"json")}}).delegate("a.cancel","click",function(){$.dialog.list.dialogz.close()}),h.tab(".withdraw-coupon ul.subtab li",".withdraw-coupon div.subtab-con","click","cur",0,function(t,i,e){function s(t){var i="",e="-";if(null!=t.data&&t.data.length){switch(r){case"wused":for(var s in t.data)2==t.data[s].cashierStatus||5==t.data[s].cashierStatus?e="已失效":4==t.data[s].cashierStatus&&(e="生效中"),i+="<tr><td>"+t.data[s].freePriod+"免费提现</td><td>"+t.data[s].source+"</td><td>"+a(t.data[s].activeTime)+"-"+a(t.data[s].expireTime)+"</td><td>"+a(t.data[s].useTime)+"</td><td>"+e+"</td></tr>";break;case"wexpired":for(var s in t.data)i+="<tr><td>"+t.data[s].freePriod+"免费提现</td><td>"+t.data[s].source+"</td><td>"+a(t.data[s].activeTime)+"-"+a(t.data[s].expireTime)+"</td></tr>"}p.html(i)}else o(),$(".pages").remove()}function o(){var t=$("#nodata").data("noimgsrc"),i="wused"==r?5:4,e='<tr ><td colspan="'+i+'" class="no-data no-coupon-data"><img src="'+t+'" alt="没有记录">没有记录</td></tr>';p.html(e)}var r=i.data("type"),p=e.find("tbody"),d=$("#pageCal"),h=e.find(".withdraw-coupon-list"),l='<div class="pages"><div class="page"></div></div>',c=(d.data("root"),"wused"==r?"/bonus/cashier/used/":"/bonus/cashier/expired/"),u=d.data("imgpath");$(".pages").remove(),h.after(l),"wunused"!=r&&n.pages(c,s,u,p,1,10,"list",100)}),$(".icon-question").poshytip({alignTo:"target",alignX:"inner-left",alignY:"top",offsetX:-15,offsetY:8})}),define("module/common/dateUtil",[],function(t,i,e){function a(t){var i=t?new Date((+t)):new Date;this.yyyy=i.getFullYear(),this.MM=i.getMonth()+1,this.dd=i.getDate(),this.hh=i.getHours(),this.mm=i.getMinutes(),this.ss=i.getSeconds(),this.D=i.getDay()}a.prototype={format:function(t){var i=this,t=t||"yyyy-MM-dd";return t.replace(/y+|M+|d+|h+|m+|s+|D/g,function(t){return i[t]>9?i[t]:"0"+i[t]})}},$.extend($,{date:function(t){return t=t||new Date,new a((+t))},toDate:function(t){return $.date(t).format("yyyy-MM-dd")},toDatetime:function(t){return t?$.date(t).format("yyyy-MM-dd hh:mm:ss"):""},totime:function(t){return t?$.date(t).format("MM月dd日hh:mm"):""}})}),define("plugIn/poshytip-1.2/src/jquery.poshytip",[],function(t,i,e){!function(t){function i(){t.each(e,function(){this.refresh(!0)})}var e=[],a=/^url\(["']?([^"'\)]*)["']?\);?$/i,s=/\.png$/i,o=!!window.createPopup&&"undefined"==document.documentElement.currentStyle.minWidth;t(window).resize(i),t.Poshytip=function(i,e){this.$elm=t(i),this.opts=t.extend({},t.fn.poshytip.defaults,e),this.$tip=t(['<div class="',this.opts.className,'">','<div class="tip-inner tip-bg-image"></div>','<div class="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left"></div>',"</div>"].join("")).appendTo(document.body),this.$arrow=this.$tip.find("div.tip-arrow"),this.$inner=this.$tip.find("div.tip-inner"),this.disabled=!1,this.content=null,this.init()},t.Poshytip.prototype={init:function(){e.push(this);var i=this.$elm.attr("title");if(this.$elm.data("title.poshytip",void 0!==i?i:null).data("poshytip",this),"none"!=this.opts.showOn)switch(this.$elm.bind({"mouseenter.poshytip":t.proxy(this.mouseenter,this),"mouseleave.poshytip":t.proxy(this.mouseleave,this)}),this.opts.showOn){case"hover":"cursor"==this.opts.alignTo&&this.$elm.bind("mousemove.poshytip",t.proxy(this.mousemove,this)),this.opts.allowTipHover&&this.$tip.hover(t.proxy(this.clearTimeouts,this),t.proxy(this.mouseleave,this));break;case"focus":this.$elm.bind({"focus.poshytip":t.proxy(this.showDelayed,this),"blur.poshytip":t.proxy(this.hideDelayed,this)})}},mouseenter:function(t){return!!this.disabled||(this.$elm.attr("title",""),"focus"==this.opts.showOn||void this.showDelayed())},mouseleave:function(t){if(this.disabled||this.asyncAnimating&&(this.$tip[0]===t.relatedTarget||jQuery.contains(this.$tip[0],t.relatedTarget)))return!0;if(!this.$tip.data("active")){var i=this.$elm.data("title.poshytip");null!==i&&this.$elm.attr("title",i)}return"focus"==this.opts.showOn||void this.hideDelayed()},mousemove:function(t){return!!this.disabled||(this.eventX=t.pageX,this.eventY=t.pageY,void(this.opts.followCursor&&this.$tip.data("active")&&(this.calcPos(),this.$tip.css({left:this.pos.l,top:this.pos.t}),this.pos.arrow&&(this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow))))},show:function(){this.disabled||this.$tip.data("active")||(this.reset(),this.update(),this.content&&(this.display(),this.opts.timeOnScreen&&this.hideDelayed(this.opts.timeOnScreen)))},showDelayed:function(i){this.clearTimeouts(),this.showTimeout=setTimeout(t.proxy(this.show,this),"number"==typeof i?i:this.opts.showTimeout)},hide:function(){!this.disabled&&this.$tip.data("active")&&this.display(!0)},hideDelayed:function(i){this.clearTimeouts(),this.hideTimeout=setTimeout(t.proxy(this.hide,this),"number"==typeof i?i:this.opts.hideTimeout)},reset:function(){this.$tip.queue([]).detach().css("visibility","hidden").data("active",!1),this.$inner.find("*").poshytip("hide"),this.opts.fade&&this.$tip.css("opacity",this.opacity),this.$arrow[0].className="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left",this.asyncAnimating=!1},update:function(t,i){if(!this.disabled){var e=void 0!==t;if(e){if(i||(this.opts.content=t),!this.$tip.data("active"))return}else t=this.opts.content;var a=this,s="function"==typeof t?t.call(this.$elm[0],function(t){a.update(t)}):"[title]"==t?this.$elm.data("title.poshytip"):t;this.content!==s&&(this.$inner.empty().append(s),this.content=s),this.refresh(e)}},refresh:function(i){if(!this.disabled){if(i){if(!this.$tip.data("active"))return;var e={left:this.$tip.css("left"),top:this.$tip.css("top")}}this.$tip.css({left:0,top:0}).appendTo(document.body),void 0===this.opacity&&(this.opacity=this.$tip.css("opacity"));var r=this.$tip.css("background-image").match(a),n=this.$arrow.css("background-image").match(a);if(r){var p=s.test(r[1]);o&&p?(this.$tip.css("background-image","none"),this.$inner.css({margin:0,border:0,padding:0}),r=p=!1):this.$tip.prepend('<table class="tip-table" border="0" cellpadding="0" cellspacing="0"><tr><td class="tip-top tip-bg-image" colspan="2"><span></span></td><td class="tip-right tip-bg-image" rowspan="2"><span></span></td></tr><tr><td class="tip-left tip-bg-image" rowspan="2"><span></span></td><td></td></tr><tr><td class="tip-bottom tip-bg-image" colspan="2"><span></span></td></tr></table>').css({border:0,padding:0,"background-image":"none","background-color":"transparent"}).find(".tip-bg-image").css("background-image",'url("'+r[1]+'")').end().find("td").eq(3).append(this.$inner),p&&!t.support.opacity&&(this.opts.fade=!1)}n&&!t.support.opacity&&(o&&s.test(n[1])&&(n=!1,this.$arrow.css("background-image","none")),this.opts.fade=!1);var d=this.$tip.find("> table.tip-table");if(o){this.$tip[0].style.width="",d.width("auto").find("td").eq(3).width("auto");var h=this.$tip.width(),l=parseInt(this.$tip.css("min-width")),c=parseInt(this.$tip.css("max-width"));!isNaN(l)&&h<l?h=l:!isNaN(c)&&h>c&&(h=c),this.$tip.add(d).width(h).eq(0).find("td").eq(3).width("100%")}else d[0]&&d.width("auto").find("td").eq(3).width("auto").end().end().width(document.defaultView&&document.defaultView.getComputedStyle&&parseFloat(document.defaultView.getComputedStyle(this.$tip[0],null).width)||this.$tip.width()).find("td").eq(3).width("100%");if(this.tipOuterW=this.$tip.outerWidth(),this.tipOuterH=this.$tip.outerHeight(),this.calcPos(),n&&this.pos.arrow&&(this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow,this.$arrow.css("visibility","inherit")),i&&this.opts.refreshAniDuration){this.asyncAnimating=!0;var u=this;this.$tip.css(e).animate({left:this.pos.l,top:this.pos.t},this.opts.refreshAniDuration,function(){u.asyncAnimating=!1})}else this.$tip.css({left:this.pos.l,top:this.pos.t})}},display:function(i){var e=this.$tip.data("active");if(!(e&&!i||!e&&i)){if(this.$tip.stop(),(this.opts.slide&&this.pos.arrow||this.opts.fade)&&(i&&this.opts.hideAniDuration||!i&&this.opts.showAniDuration)){var a={},s={};if(this.opts.slide&&this.pos.arrow){var o,r;"bottom"==this.pos.arrow||"top"==this.pos.arrow?(o="top",r="bottom"):(o="left",r="right");var n=parseInt(this.$tip.css(o));a[o]=n+(i?0:this.pos.arrow==r?-this.opts.slideOffset:this.opts.slideOffset),s[o]=n+(i?this.pos.arrow==r?this.opts.slideOffset:-this.opts.slideOffset:0)+"px"}this.opts.fade&&(a.opacity=i?this.$tip.css("opacity"):0,s.opacity=i?0:this.opacity),this.$tip.css(a).animate(s,this.opts[i?"hideAniDuration":"showAniDuration"])}if(i?this.$tip.queue(t.proxy(this.reset,this)):this.$tip.css("visibility","inherit"),e){var p=this.$elm.data("title.poshytip");null!==p&&this.$elm.attr("title",p)}this.$tip.data("active",!e)}},disable:function(){this.reset(),this.disabled=!0},enable:function(){this.disabled=!1},destroy:function(){this.reset(),this.$tip.remove(),delete this.$tip,this.content=null,this.$elm.unbind(".poshytip").removeData("title.poshytip").removeData("poshytip"),e.splice(t.inArray(this,e),1)},clearTimeouts:function(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=0),this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0)},calcPos:function(){var i,e,a,s,o,r,n={l:0,t:0,arrow:""},p=t(window),d={l:p.scrollLeft(),t:p.scrollTop(),w:p.width(),h:p.height()};if("cursor"==this.opts.alignTo)i=e=a=this.eventX,s=o=r=this.eventY;else{var h=this.$elm.offset(),l={l:h.left,t:h.top,w:this.$elm.outerWidth(),h:this.$elm.outerHeight()};i=l.l+("inner-right"!=this.opts.alignX?0:l.w),e=i+Math.floor(l.w/2),a=i+("inner-left"!=this.opts.alignX?l.w:0),s=l.t+("inner-bottom"!=this.opts.alignY?0:l.h),o=s+Math.floor(l.h/2),r=s+("inner-top"!=this.opts.alignY?l.h:0)}switch(this.opts.alignX){case"right":case"inner-left":n.l=a+this.opts.offsetX,this.opts.keepInViewport&&n.l+this.tipOuterW>d.l+d.w&&(n.l=d.l+d.w-this.tipOuterW),"right"!=this.opts.alignX&&"center"!=this.opts.alignY||(n.arrow="left");break;case"center":n.l=e-Math.floor(this.tipOuterW/2),this.opts.keepInViewport&&(n.l+this.tipOuterW>d.l+d.w?n.l=d.l+d.w-this.tipOuterW:n.l<d.l&&(n.l=d.l));break;default:n.l=i-this.tipOuterW-this.opts.offsetX,this.opts.keepInViewport&&n.l<d.l&&(n.l=d.l),"left"!=this.opts.alignX&&"center"!=this.opts.alignY||(n.arrow="right")}switch(this.opts.alignY){case"bottom":case"inner-top":n.t=r+this.opts.offsetY,n.arrow&&"cursor"!=this.opts.alignTo||(n.arrow="top"),this.opts.keepInViewport&&n.t+this.tipOuterH>d.t+d.h&&(n.t=s-this.tipOuterH-this.opts.offsetY,"top"==n.arrow&&(n.arrow="bottom"));break;case"center":n.t=o-Math.floor(this.tipOuterH/2),this.opts.keepInViewport&&(n.t+this.tipOuterH>d.t+d.h?n.t=d.t+d.h-this.tipOuterH:n.t<d.t&&(n.t=d.t));break;default:n.t=s-this.tipOuterH-this.opts.offsetY,n.arrow&&"cursor"!=this.opts.alignTo||(n.arrow="bottom"),this.opts.keepInViewport&&n.t<d.t&&(n.t=r+this.opts.offsetY,"bottom"==n.arrow&&(n.arrow="top"))}this.pos=n}},t.fn.poshytip=function(i){if("string"==typeof i){var e=arguments,a=i;return Array.prototype.shift.call(e),"destroy"==a&&(this.die?this.die("mouseenter.poshytip").die("focus.poshytip"):t(document).undelegate(this.selector,"mouseenter.poshytip").undelegate(this.selector,"focus.poshytip")),this.each(function(){var i=t(this).data("poshytip");i&&i[a]&&i[a].apply(i,e)})}var s=t.extend({},t.fn.poshytip.defaults,i);if(t("#poshytip-css-"+s.className)[0]||t(['<style id="poshytip-css-',s.className,'" type="text/css">',"div.",s.className,"{visibility:hidden;position:absolute;top:0;left:0;}","div.",s.className," table.tip-table, div.",s.className," table.tip-table td{margin:0;font-family:inherit;font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;vertical-align:middle;}","div.",s.className," td.tip-bg-image span{display:block;font:1px/1px sans-serif;height:",s.bgImageFrameSize,"px;width:",s.bgImageFrameSize,"px;overflow:hidden;}","div.",s.className," td.tip-right{background-position:100% 0;}","div.",s.className," td.tip-bottom{background-position:100% 100%;}","div.",s.className," td.tip-left{background-position:0 100%;}","div.",s.className," div.tip-inner{background-position:-",s.bgImageFrameSize,"px -",s.bgImageFrameSize,"px;}","div.",s.className," div.tip-arrow{visibility:hidden;position:absolute;overflow:hidden;font:1px/1px sans-serif;}","</style>"].join("")).appendTo("head"),s.liveEvents&&"none"!=s.showOn){var o,r=t.extend({},s,{liveEvents:!1});switch(s.showOn){case"hover":o=function(){var i=t(this);i.data("poshytip")||i.poshytip(r).poshytip("mouseenter")},this.live?this.live("mouseenter.poshytip",o):t(document).delegate(this.selector,"mouseenter.poshytip",o);break;case"focus":o=function(){var i=t(this);i.data("poshytip")||i.poshytip(r).poshytip("showDelayed")},this.live?this.live("focus.poshytip",o):t(document).delegate(this.selector,"focus.poshytip",o)}return this}return this.each(function(){new t.Poshytip(this,s)})},t.fn.poshytip.defaults={content:"[title]",className:"tip-yellow",bgImageFrameSize:10,showTimeout:500,hideTimeout:100,timeOnScreen:0,showOn:"hover",liveEvents:!1,alignTo:"cursor",alignX:"right",alignY:"top",offsetX:-22,offsetY:18,keepInViewport:!0,allowTipHover:!0,followCursor:!1,fade:!0,slide:!0,slideOffset:8,showAniDuration:300,hideAniDuration:300,refreshAniDuration:200}}(jQuery)}),define("module/page/js/init",[],function(t,i,e){var a=function(t,i,e,a,s,o){s=s||10;var r=e.totalRow/s;o=o||30,$("#pageCal").val(e.totalRow);var n=parseInt(r)>=o?o:r.toString().indexOf(".")>-1?parseInt(r)+1:parseInt(r),p="list"==a?'第<i class="pg">'+(t+1)+'</i>页/共<i class="cal">'+n+'</i>页<a data-page="fast" href="javascript:void(0);">首页</a><a data-page="up" href="javascript:void(0);">上一页</a>':'<span class="l">第<i class="pg">'+(t+1)+'</i>页/共<i class="cal">'+n+'</i>页<a data-page="fast" href="javascript:void(0);">首页</a></span><a class="up" data-page="up" href="javascript:void(0);">上一页</a>',d="list"==a?'<a data-page="down" href="javascript:void(0)">下一页</a><a data-page="last" href="javascript:void(0)">末页</a>':'<a class="down" data-page="down" href="javascript:void(0)">下一页</a><span class="l"><a data-page="last" href="javascript:void(0)">末页</a></span>';switch(i){case"fast":if(n>5)p+='<a data-page="un" class="cur" href="javascript:void(0);">1</a><a data-page="un" href="javascript:void(0);">2</a><a data-page="un" href="javascript:void(0);">3</a><a data-page="un" href="javascript:void(0);">4</a><a data-page="un" href="javascript:void(0);">5</a>';else for(var h=0;h<n;h++)p+='<a data-page="un" href="javascript:void(0);">'+(h+1)+"</a>";$("div.page").html(p+d),$(".page a[data-page='un']:first").addClass("cur");break;case"up":if(t<4&&n>=5){for(var h=1;h<6;h++)p+='<a data-page="un" href="javascript:void(0);">'+h+"</a>";$("div.page").html(p+d),$(".page a[data-page='un']:contains('"+(t+1)+"')").addClass("cur")}else if(t<4&&n<5){for(var l=parseInt(n)+1,h=1;h<l;h++)p+='<a data-page="un" href="javascript:void(0);">'+h+"</a>";$("div.page").html(p+d),$(".page a[data-page='un']:contains('"+(t+1)+"')").addClass("cur")}else{for(var h=t-2;h<t+3;h++)p+='<a data-page="un" href="javascript:void(0);">'+h+"</a>";$("div.page").html(p+d),$(".page a[data-page='un']:last").prev().addClass("cur")}break;case"down":var l=parseInt(n)+1;if(n-5<t&&n>0){for(var h=n-4;h<l;h++)p+='<a data-page="un" href="javascript:void(0);">'+h+"</a>";$("div.page").html(p+d),$(".page a[data-page='un']:contains('"+(t+1)+"')").addClass("cur")}else{for(var h=t;h<t+5;h++)p+='<a data-page="un" href="javascript:void(0);">'+h+"</a>";$("div.page").html(p+d),$("div.page a[data-page='un']:eq(1)").addClass("cur")}break;case"last":if(n>t)for(var c=n-5>0?n-5:0,h=c;h<n;h++)p+='<a data-page="un" href="javascript:void(0);">'+(h+1)+"</a>";$("div.page").html(p+d),$("div.page a[data-page='un']:last").addClass("cur")}$(".page i.pg").html(t+1)};i.pages=function(t,i,e,s,o,r,n,p,d,h,l){var l=l?l:"get",o=o||1,r=r||10,d=d?"?"+d:"",h=h||1,c='<img src="'+window.global.staticPath+'/images/loading-44bbc291bc.gif" />',u=function(e,o){$(s).html('<span class="loding-img">'+c+"</span>"),e=e-1||0,$.ajaxSetup({cache:!1}),$[l](t+e+"/"+r+d,function(t,s,d){var t="object"==typeof t?t=t||{}:JSON.parse(t);0!=t.totalRow&&null!=t.totalRow&&a(e,o,t,n,r,p),i(t,h,d)},"json")},f=function(t){var i=$(t),e=$("a[data-page='un']:first"),a=$("a[data-page='un']:last"),s="un"==i.attr("data-page")?parseInt(i.html()):parseInt($(".page a[data-page='un'].cur").html()),o=parseInt($(".page .cal").html());switch(i.attr("data-page")){case"fast":1!=s&&u(1,"fast");break;case"up":if(e.next().hasClass("cur")&&1!=s)u(s-1,"up");else{if(e.hasClass("cur")&&1==s)return;$(".page .cur").prev().addClass("cur").siblings().removeClass("cur"),u(s-1)}break;case"un":$(".page a[data-page='un'].cur").html()!=i.html()&&(e.html()==i.html()&&1!=i.html()?u(parseInt(i.html()),"up"):a.html()==i.html()&&i.html()!=o?u(parseInt(i.html()),"down"):(i.addClass("cur").siblings().removeClass("cur"),u(parseInt(i.html()))));break;case"down":if(a.prev().hasClass("cur")&&s!=o-1)u(s+1,"down");else{if(a.hasClass("cur")&&s==o)return;$(".page .cur").next().addClass("cur").siblings().removeClass("cur"),u(s+1)}break;case"last":o!=s&&u(o,"last")}},m=function(){$("div.page").delegate("a","click",function(t){return t.preventDefault(),f(this),!1})};return m(),u(o,"fast"),this}}),define("module/common/tab",[],function(t,i,e){i.tab=function(t,i,e,a,s,o){var r=$(t),n=$(i);if(!(r.length<=0)){var s=s||0;r.each(function(t){$(this).on(e?e:"mouseenter",function(){var i=$(this),e=n.eq(t);return r.removeClass(a),i.addClass(a),n.hide(),e.show(),"function"==typeof o&&o(t,i,e),!1})}),r.eq(s).trigger(e)}}});